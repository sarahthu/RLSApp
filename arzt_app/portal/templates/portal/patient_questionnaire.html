{% extends "portal/layout.html" %}
{% block content %}

<h2>{{ questionnaire_label }} ({{ questionnaire_id }})</h2>

{% if error %}
  <div style="background:#ffe3e3;padding:12px;border-radius:10px;margin-top:18px;">
    {{ error }}
  </div>
{% endif %}

{% if answers %}


  {% for a in answers %}
    {% if a.question|lower == "score" %}
      <div style="background:#f1f5f9; padding:16px; border-radius:12px; margin:16px 0;">
        <div style="font-size:14px; color:#334155; margin-bottom:6px;">Gesamt-Score</div>
        <div style="font-size:28px; font-weight:800;">{{ a.answers.0 }}</div>
        <div style="font-size:12px; color:#94a3b8; margin-top:6px;">linkId: {{ a.linkId }}</div>
      </div>
    {% endif %}
  {% endfor %}

  <!--nterpretation-Box -->
  {% for a in answers %}
    {% if a.question|lower == "score interpretation" %}
      <div style="background:#fef3c7; padding:16px; border-radius:12px; margin-bottom:20px;">
        <div style="font-size:14px; color:#92400e; margin-bottom:6px;">Interpretation</div>
        <div style="font-weight:700;">{{ a.answers.0 }}</div>
        <div style="font-size:12px; color:#b45309; margin-top:6px;">linkId: {{ a.linkId }}</div>
      </div>
    {% endif %}
  {% endfor %}

  <!--Fragen als Karten -->
  <div style="margin-top:10px;">
    {% for a in answers %}
      {% if a.question|lower != "score" and a.question|lower != "score interpretation" %}
        <div style="background:white; border:1px solid #e5e7eb; border-radius:12px; padding:16px; margin-bottom:12px;">
          <div style="font-weight:700; margin-bottom:10px;">
            {{ a.question }}
          </div>

          <div style="margin-bottom:10px;">
            <span style="color:#6b7280; margin-right:8px;">Antwort:</span>
            {% for v in a.answers %}
              <span style="display:inline-block; padding:4px 10px; border:1px solid #cbd5e1; border-radius:999px; margin-right:6px;">
                {{ v }}
              </span>
            {% endfor %}
          </div>

          <div style="font-size:12px; color:#9ca3af;">
            linkId: {{ a.linkId }}
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

{% else %}
  <p>Keine Antworten vorhanden.</p>
{% endif %}

<p style="margin-top:16px;">
  <a href="{% url 'patient_detail' patient_id %}">← Zurück zum Patienten</a>
</p>

{% endblock %}